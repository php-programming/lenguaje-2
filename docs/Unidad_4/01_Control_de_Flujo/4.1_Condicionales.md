# 4.1 Estructuras de Control Condicionales

## Caso de Uso

**Escenario:** Un sistema de control de acceso (ACL) para una aplicación empresarial.
**Regla de Negocio:**
1.  Si el usuario es "Admin", tiene acceso total.
2.  Si es "Editor", puede editar pero no borrar.
3.  Si es "Viewer", solo puede leer.
4.  Si no tiene rol, acceso denegado.
**Reto:** Implementar esta lógica de forma que sea legible, eficiente y segura (fail-safe).

---

## La Toma de Decisiones Algorítmica

Las estructuras de control rompen la ejecución lineal del código, permitiendo que el software reaccione a diferentes estados de datos.

### 1. `if`, `elseif`, `else`

Es la estructura fundamental. Evalúa expresiones booleanas.

```php
$rol = obtener_rol_usuario();

if ($rol === 'admin') {
    conceder_acceso_total();
} elseif ($rol === 'editor') {
    conceder_acceso_edicion();
} else {
    // Principio de "Fail-Safe" o "Deny by Default"
    // Si ninguna condición específica se cumple, se asume el menor privilegio posible.
    denegar_acceso();
}
```

**Mejor Práctica de Ingeniería:** Siempre cubra el caso `else`. Incluso si cree que es "imposible" llegar ahí, el `else` actúa como una red de seguridad para estados de datos corruptos o inesperados.

### 2. `switch` (Selección Múltiple)

Útil cuando se compara una misma variable contra múltiples valores constantes. Es más limpio que múltiples `elseif`.

```php
switch ($estado_pedido) {
    case 'pendiente':
        procesar_pago();
        break; // El break es vital para evitar el "fall-through"
    case 'pagado':
        enviar_producto();
        break;
    default:
        log_error("Estado de pedido desconocido");
}
```

### 3. Operador Ternario (`? :`)

Una forma compacta de `if-else` para asignaciones simples.

```php
// Sintaxis: condición ? valor_si_true : valor_si_false
$mensaje = ($edad >= 18) ? "Acceso permitido" : "Acceso denegado";
```

### 4. Operador de Fusión de Null (`??`) - PHP 7+

Esencial para manejar datos que podrían no existir (ej. parámetros opcionales en una API), evitando errores de "Undefined index".

```php
// Si $_GET['usuario'] existe y no es null, úsalo. Si no, usa 'Invitado'.
$usuario = $_GET['usuario'] ?? 'Invitado';
```
