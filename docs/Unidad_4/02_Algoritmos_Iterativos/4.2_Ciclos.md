# 4.2 Algoritmos Iterativos (Ciclos)

## Caso de Uso

**Escenario:** Generación de un reporte mensual de ventas.
**Datos:** Una base de datos devuelve 10,000 registros de transacciones.
**Tarea:** Calcular el total de ventas y generar una fila HTML para cada transacción.
**Solución:** Automatizar la tarea repetitiva mediante un bucle.

---

## Automatización de Tareas Repetitivas

Los ciclos permiten ejecutar un bloque de código múltiples veces. La elección del ciclo correcto afecta la legibilidad y el riesgo de errores (como bucles infinitos).

### 1. `for`

Se utiliza cuando se conoce de antemano el número de iteraciones. Es ideal para contadores o recorrer arrays indexados por posición.

```php
// Tabla de multiplicar del 5
for ($i = 1; $i <= 10; $i++) {
    echo "5 x $i = " . (5 * $i) . "<br>";
}
```

### 2. `while` y `do-while`

Se utilizan cuando la repetición depende de una condición externa, no de un contador fijo.
*   **`while`:** Evalúa la condición *antes* de ejecutar. Puede no ejecutarse nunca.
*   **`do-while`:** Evalúa la condición *al final*. Garantiza al menos una ejecución.

**Riesgo de Ingeniería:** Los bucles `while` son propensos a **bucles infinitos** si la condición de salida nunca se cumple (ej. olvidar incrementar un contador o leer de un stream que nunca cierra).

### 3. `foreach`

Es la estructura de control más utilizada en el desarrollo backend moderno. Está diseñada específicamente para iterar sobre **colecciones** (arrays y objetos). Abstrae la gestión de punteros internos y contadores, reduciendo errores "off-by-one".

```php
$productos = [
    ['nombre' => 'Laptop', 'precio' => 1000],
    ['nombre' => 'Mouse', 'precio' => 20]
];

echo "<ul>";
foreach ($productos as $item) {
    // $item es una copia temporal del elemento actual
    echo "<li>" . $item['nombre'] . ": $" . $item['precio'] . "</li>";
}
echo "</ul>";
```

### Complejidad Algorítmica (Big O)

Como ingenieros, debemos ser conscientes del costo de los bucles anidados.
*   Un `foreach` simple es **O(n)** (lineal).
*   Un `foreach` dentro de otro `foreach` es **O(n²)** (cuadrático). Con 10,000 registros, esto implica 100,000,000 de operaciones, lo que puede tumbar el servidor.
**Regla:** Evitar anidar bucles profundos siempre que sea posible.
