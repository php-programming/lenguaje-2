# 9.4 Aplicación de la Herencia

Ahora, la clase `ProductoModel` es mucho más limpia, ya que hereda las funciones básicas de `ModeloBase`. Solo necesita definir la propiedad `$tabla`.

## Estructura de Carpetas

```text
/
├── modelos/
│   ├── ModeloBase.php  <-- CLASE PADRE
│   └── ProductoModel.php <-- CLASE HIJA
└── controladores/
    └── ProductoController.php
```

## Clase `ProductoModel.php` (Modelo Específico)

```php
<?php
// Primero, incluimos el modelo base para poder extenderlo
require_once 'ModeloBase.php';

/**
 * ProductoModel: Hereda toda la funcionalidad CRUD básica de ModeloBase.
 * Solo necesita implementar su lógica de negocio específica.
 */
class ProductoModel extends ModeloBase {

    // **ÚNICO CAMBIO NECESARIO:** Definir la tabla específica.
    protected $tabla = 'productos';

    // Método Específico (Lógica de Negocio Única)
    public function obtenerProductosEnOferta() {
        // Este método NO es genérico y solo existe para los productos.
        return "Consulta específica: Productos con descuento mayor al 20%.";
    }
}
?>
```

## Conexión con el Controlador

Ahora, el `ProductoController` (Unidad I) puede usar los métodos genéricos.

**Clase `ProductoController.php` (El Consumidor de los Modelos):**

```php
<?php
// Incluimos la clase que queremos usar (que a su vez incluye ModeloBase)
require_once '../modelos/ProductoModel.php';

class ProductoController {

    protected $modelo;

    public function __construct() {
        // El controlador instancia el modelo hijo
        $this->modelo = new ProductoModel();
    }

    public function listar() {
        // Usa el método GENÉRICO heredado de ModeloBase
        $resultado = $this->modelo->obtenerTodos();
        echo "<h3>Listado desde Controlador Genérico:</h3>";
        echo print_r($resultado, true);
    }

    public function crear() {
        $datos = ['nombre' => 'Teclado Mecánico', 'stock' => 50];
        // Usa el método GENÉRICO heredado de ModeloBase
        $resultado = $this->modelo->guardar($datos);
        echo "<h3>Creación desde Controlador Genérico:</h3>";
        echo print_r($resultado, true);
    }
}
?>
```

## Resumen de POO Aplicada

Con este diseño, hemos logrado:

- **Encapsulamiento**: Las propiedades importantes como `$tabla` y `$db_conn` son `protected`, lo que significa que solo las clases que heredan (`ProductoModel`) pueden acceder a ellas.
- **Herencia**: `ProductoModel` extiende `ModeloBase`, obteniendo el 80% de su funcionalidad (CRUD) sin escribir código repetido.
- **Abstracción**: El desarrollador del `ProductoController` solo sabe que el modelo tiene el método `obtenerTodos()`, no le importa cómo `ModeloBase` maneja la conexión interna.
