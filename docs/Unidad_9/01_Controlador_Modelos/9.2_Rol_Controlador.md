# 9.2 El Rol del Controlador de Modelos

El Controlador de Modelos es simplemente un Controlador que tiene como responsabilidad principal interactuar con uno o varios objetos Modelo.

1.  **Recibe la Petición**: Un usuario pide `/usuarios/lista`.
2.  **Decide la Acción**: El Controlador sabe que debe ejecutar la acción `lista()`.
3.  **Invoca al Modelo**: El Controlador llama al `ModeloUsuario` y le pide los datos: `$usuarios = $modeloUsuario->obtenerTodos();`.
4.  **Pasa los Datos a la Vista**: El Controlador pasa la lista de usuarios a la `VistaUsuariosLista` para que los muestre: `$vista->mostrar('usuarios_lista', $usuarios);`.

## Ejemplo Práctico (Estructura de Clases)

Crearemos la estructura inicial de un controlador que maneja, por ejemplo, los datos de un producto.

### a. Estructura de Carpetas:

```text
/
├── controladores/
│   └── ProductoController.php
├── modelos/
│   └── ProductoModel.php
└── index.php
```

### b. Clase `ProductoModel.php` (El Modelo - Lógica de Datos):

```php
<?php
class ProductoModel {
    public function obtenerTodos() {
        // En una aplicación real, aquí iría la conexión y consulta a la DB.
        return [
            ['id' => 1, 'nombre' => 'Laptop', 'precio' => 1000],
            ['id' => 2, 'nombre' => 'Mouse', 'precio' => 20]
        ];
    }
}
?>
```

### c. Clase `ProductoController.php` (El Controlador - Lógica de Control):

```php
<?php
// Necesitamos que el Modelo esté disponible
require_once '../modelos/ProductoModel.php';

class ProductoController {

    // El Controlador contiene una referencia al Modelo
    protected $modelo;

    public function __construct() {
        // Al instanciar el controlador, instanciamos el modelo que usará
        $this->modelo = new ProductoModel();
    }

    // Acción para mostrar la lista de productos
    public function listar() {
        // 1. EL CONTROLADOR LLAMA AL MODELO
        $productos = $this->modelo->obtenerTodos();

        // 2. EL CONTROLADOR PASA LOS DATOS A LA VISTA (Simulada)
        // En un framework real, esto sería: return View::make('productos.lista', $productos);
        echo "<h1>Lista de Productos</h1>";
        echo "<pre>" . print_r($productos, true) . "</pre>";
        
        echo "El Controlador ha pasado los datos del Modelo a la (simulada) Vista.";
    }
}
?>
```

### d. Uso de Muestra (en `index.php` - Simulación de Petición):

```php
<?php
// require_once 'controladores/ProductoController.php';

// $controller = new ProductoController();
// $controller->listar();
?>
```

> [!NOTE]
> Esto lo hará el Enrutador (Unidad V) automáticamente.
