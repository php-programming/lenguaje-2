# 7.4 Herencia y Encapsulamiento: Los Pilares de la POO

Estos son los dos primeros "pilares" fundamentales de la POO. Son los superpoderes que nos permiten escribir c√≥digo seguro y reutilizable.

## 7.4.1 Encapsulamiento üì¶ (Protecci√≥n de Datos)

El encapsulamiento es el principio de ocultar la complejidad interna de un objeto y proteger sus datos del mundo exterior.

*   **El Problema:** En el ejemplo anterior, cualquiera pod√≠a hacer `$miFerrari->velocidadActual = -500;`. ¬°Esto es un estado inv√°lido! Un coche no puede tener velocidad negativa.
*   **La Soluci√≥n:** Marcamos los atributos como `private` y controlamos el acceso mediante m√©todos.

### Visibilidad:
*   `public`: Se puede acceder desde cualquier lugar.
*   `private`: Solo se puede acceder desde dentro de la propia clase.
*   `protected`: Se puede acceder desde la clase y sus clases "hijas" (Herencia).

**Getters y Setters:** Son los guardianes.
*   **Setter:** M√©todo p√∫blico para CAMBIAR un dato privado (aplicando validaci√≥n).
*   **Getter:** M√©todo p√∫blico para LEER un dato privado (quiz√°s con formato).

```php
<?php
class Coche {
    public $marca;
    private $velocidadActual = 0; // ¬°AHORA ES PRIVADO!

    // SETTER: Protege el dato
    public function setVelocidad($velocidad) {
        // L√≥gica de negocio: validaci√≥n
        if ($velocidad < 0) {
            $this->velocidadActual = 0;
        } else {
            $this->velocidadActual = $velocidad;
        }
    }

    // GETTER: Lee el dato
    public function getVelocidad() {
        return $this->velocidadActual . " km/h";
    }
}
?>
```

## 7.4.2 Herencia üß¨ (Reutilizaci√≥n de C√≥digo)

La herencia permite crear una nueva clase (Hija) que "absorbe" autom√°ticamente todos los atributos y m√©todos de otra clase (Padre).
El objetivo es cumplir el principio **DRY (Don't Repeat Yourself)**.

*   **Clase Padre (Base):** `Vehiculo` (tiene marca, modelo, arrancar()).
*   **Clase Hija (Derivada):** `Coche` (hereda todo de Vehiculo y a√±ade `numeroDePuertas`).
*   **Clase Hija (Derivada):** `Moto` (hereda todo de Vehiculo y a√±ade `hacerCaballito()`).

Usamos la palabra clave `extends`.

```php
<?php
// CLASE PADRE
class Vehiculo {
    protected $marca; // 'protected' permite acceso a las hijas

    public function setMarca($marca) {
        $this->marca = $marca;
    }

    public function arrancarMotor() {
        echo "El motor del $this->marca est√° arrancando.\n";
    }
}

// CLASE HIJA (Hereda de Vehiculo)
class CocheDeportivo extends Vehiculo {
    // Hereda setMarca() y arrancarMotor() autom√°ticamente.

    // A√±adimos un m√©todo propio
    public function activarTurbo() {
        echo "¬°Activando NITRO en el $this->marca!\n";
    }
}
?>
```
